<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Binary Search Trees</title>
  </head>
  <body>
    <script>
      //
      class Node {
        constructor(root) {
          this.data = root;
          this.left = null;
          this.right = null;
        }
      }

      class Tree {
        constructor() {
          this.root = null;
        }
        buildTree(array) {
          const arr = removeDupl(array).sort((a, b) => a - b);
          const start = 0;
          const end = arr.length - 1;
          const mid = Math.floor((start + end) / 2);

          function recBuilding(array, start, end) {
            if (start > end) return null;
            const mid = Math.floor((start + end) / 2);
            const root = new Node(arr[mid]);

            root.left = recBuilding(arr, start, mid - 1);
            root.right = recBuilding(arr, mid + 1, end);

            return root;
          }
          const finalTree = recBuilding(arr, start, end);
          prettyPrint(finalTree);
          this.root = finalTree;
          return finalTree;
        }

        insert(value) {
          function insertRec(root, value) {
            if (root == null) {
              root = new Node(value);
              return root;
            }

            if (value < root.data) {
              root.left = insertRec(root.left, value);
            } else if (value > root.data) {
              root.right = insertRec(root.right, value);
            }

            return root;
          }
          const updatedTree = insertRec(this.root, value);
          prettyPrint(updatedTree);
        }

        //
      }

      function prettyPrint(node, prefix = '', isLeft = true) {
        if (node === null) {
          return;
        }
        if (node.right !== null) {
          prettyPrint(
            node.right,
            `${prefix}${isLeft ? '│   ' : '    '}`,
            false
          );
        }
        console.log(`${prefix}${isLeft ? '└── ' : '┌── '}${node.data}`);
        if (node.left !== null) {
          prettyPrint(node.left, `${prefix}${isLeft ? '    ' : '│   '}`, true);
        }
      }

      function removeDupl(arr) {
        let uniqueArr = [];
        for (i = 0; i < arr.length; i++) {
          if (!uniqueArr.includes(arr[i])) {
            uniqueArr.push(arr[i]);
          }
        }
        return uniqueArr;
      }

      //
    </script>
  </body>
</html>
